[{"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/index.js":"1","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/reportWebVitals.js":"2","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/App.js":"3","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/Room.jsx":"4","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/MediaHandler.js":"5","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/Peer.js":"6","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/api/api.js":"7","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/RemoteVideo.jsx":"8","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/VideoBar.jsx":"9","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/UserVideo.jsx":"10","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/Consumer.js":"11","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/Topbar.jsx":"12"},{"size":593,"mtime":1608972533611,"results":"13","hashOfConfig":"14"},{"size":362,"mtime":1608957765104,"results":"15","hashOfConfig":"14"},{"size":700,"mtime":1609232969123,"results":"16","hashOfConfig":"14"},{"size":4177,"mtime":1609747813426,"results":"17","hashOfConfig":"14"},{"size":982,"mtime":1609149308675,"results":"18","hashOfConfig":"14"},{"size":7389,"mtime":1609587465060,"results":"19","hashOfConfig":"14"},{"size":527,"mtime":1609583597469,"results":"20","hashOfConfig":"14"},{"size":917,"mtime":1609561923804,"results":"21","hashOfConfig":"14"},{"size":1695,"mtime":1609755623085,"results":"22","hashOfConfig":"14"},{"size":2631,"mtime":1609755520658,"results":"23","hashOfConfig":"14"},{"size":809,"mtime":1609582659978,"results":"24","hashOfConfig":"14"},{"size":624,"mtime":1609741374560,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"shrcli",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"28"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"40","usedDeprecatedRules":"28"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"28"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"50","messages":"51","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"28"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"28"},"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/index.js",[],["56","57"],"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/reportWebVitals.js",[],"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/App.js",["58"],"import {useState, useEffect} from \"react\";\nimport './App.css';\nimport Room from './compontents/Room'\nimport {Route, Switch, useHistory} from \"react-router-dom\";\n\nexport default function App() {\n\n  const [userType, setUserType] = useState(\"student\");\n  const history = useHistory();\n  function createRoom() {\n    setUserType(\"teacher\");\n    history.push(\"/room/send\");\n  }\n  return (\n    <div className=\"App\">\n        <Switch>\n            <Route path=\"/\" exact >\n               <button onClick={()=>{createRoom()}}>createRoom</button>\n            </Route>\n            <Route path=\"/room/:roomId\" render={(props)=><Room userType={userType} {...props}/>}/>\n        </Switch>\n        \n    </div>\n  );\n}\n\n","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/Room.jsx",["59"],"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/MediaHandler.js",[],"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/Peer.js",["60","61","62","63","64","65","66"],"import Consumer from './Consumer';\nclass Peer {\n    constructor(socket, userData, device) {\n        this.socket = socket;\n        this.userData = userData;\n        this.device = device;\n        this.stream = undefined;\n        this.sendTransport = undefined;\n        this.recvTransport = undefined;\n        this.videoProducer = undefined;\n        this.audioProducer = undefined;\n        this.consumers = [];\n        this.produceData = undefined;\n        this.streamEvent = undefined;\n        this.isDispachReady = true;\n        this.teacherConsumer = undefined;\n        this.setUpListners();\n        \n    }\n    setUpListners() {\n        this.socket.once(\"send-transport-created\", (data)=>{\n            console.log(\"==============================++>send trasport created at the server\");\n            // console.log(data);\n            this.setUpSendTransport(data);\n        });\n        this.socket.once(\"recv-transport-created\", (data)=>{\n            console.log(\"=============++> recivee transport created at the server\");\n            console.log(this.socket.id);\n            console.log(data);\n            this.setUpRecvTransport(data);\n        });\n\n        this.socket.on(\"consumer-done\", ({consumerData, userData})=>{\n            console.log(userData);\n            \n            if(userData.type===\"teacher\") {\n                let consumer = this.getTeacherConsumer(userData);\n                this.setUpConsumer(consumerData, consumer)\n                .then(()=>{\n                    console.log(\"track of teacher has been obtained\");\n                    if(consumer.videoConsumer!=undefined && consumer.audioConsumer!=undefined) {\n                        consumer.playPauseVideo(\"play\");\n                        let stream = new MediaStream([consumer.audioConsumer.track, consumer.videoConsumer.track]);\n                        let event = new CustomEvent(\"gotTeacher\");\n                        event.data = {isTeacher:false, teacherStream:stream, teacherData:userData};\n                        window.document.dispatchEvent(event);\n                    }\n                })\n\n            } else {\n                let consumer = this.getConsumer(userData);\n                this.setUpConsumer(consumerData, consumer)\n                .then(()=>{\n                    console.log(\"track has been obtained\");\n                    if(consumer.videoConsumer!=undefined && consumer.audioConsumer!=undefined) {\n                        this.streamEvent.data =  {consumers:this.consumers};\n                        window.document.dispatchEvent(this.streamEvent);\n                    }\n                });\n            }\n        });\n        this.socket.on(\"join-back\", (userData)=>{\n            this.socket.emit(\"reverse-connect-with-user\", {userData:userData, rtpCapabilities:this.device.rtpCapabilities})    \n        })\n        this.streamEvent = new CustomEvent(\"gotStream\");\n    }\n\n    createTransports(stream) {\n        this.stream = stream;\n        this.socket.emit(\"create-send-transport\", null);\n        this.socket.emit(\"create-recv-transport\", this.socket.id);\n        // this.createRecvTransport();\n    }\n    connectWithUser(userData) {\n        this.socket.emit(\"connect-with-user\", {userData:userData, rtpCapabilities:this.device.rtpCapabilities})\n    }\n    \n    getConsumer(userData) {\n        for(let c of this.consumers) {\n            if(c.id===userData.id) {\n                return c;\n            }\n        }\n        let consumer =  new Consumer(userData, this);\n        this.addConsumer(consumer);\n        return consumer;\n    }\n    getTeacherConsumer(userData) {\n        if(this.teacherConsumer==undefined) {\n            this.teacherConsumer = new Consumer(userData, this);\n        } \n        return this.teacherConsumer;\n    }\n    addConsumer(consumer) {\n        this.consumers.push(consumer);\n    }\n    removeConsumer(consumer) {\n        let index = this.consumers.indexOf(consumer);\n        if(index!=-1) {\n            this.consumers.splice(index, 1);\n\n        } else {\n            console.log(\"consumer dose not exist!\");\n        }\n    }\n    PlayPauseVideo(type) {\n        this.socket.emit(\"play-pause\", type);\n    }\n    async setUpSendTransport({id, iceParameters, iceCandidates, dtlsParameters, sctpParameters}) {\n        this.sendTransport = this.device.createSendTransport({\n            id,\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n        });\n\n        this.sendTransport.on(\"connect\", async({dtlsParameters}, callBack, errBack)=>{\n            console.log(\"connect event occurs\");\n            try {\n                this.socket.emit(\"connect-send-transport\", {\n                    transportId    : id, \n                    dtlsParameters : dtlsParameters \n                });\n                this.socket.on(\"send-transport-connected\", ()=>{\n                    callBack();\n                })\n\n            }catch(err) {\n                errBack(err);\n            }\n\n        });\n        this.sendTransport.on(\"produce\", async({kind, rtpParameters}, callBack, errBack)=>{\n            console.log(`produce event occurs with kind: ${kind}`);\n            let produceData = {\n                kind:kind,\n                rtpParameters, rtpParameters\n            };\n            this.socket.emit(\"create-producer\", produceData);\n            this.socket.once(\"producer-done\", (id)=>{\n                console.log(\"produer_done\");\n                callBack({id})\n            })\n\n        });\n        this.setUpProducer();\n    }\n    async setUpRecvTransport({id, iceParameters, iceCandidates, dtlsParameters, sctpParameters}) {\n        this.recvTransport = this.device.createRecvTransport({\n            id,\n            iceParameters,\n            iceCandidates,\n            dtlsParameters,\n            sctpParameters,\n        });\n\n        this.recvTransport.on(\"connect\", async({dtlsParameters}, callBack, errBack)=>{\n            console.log(\"connect event occurs in receive transport\");\n            try {\n                this.socket.emit(\"connect-recv-transport\", {\n                    transportId    : id, \n                    dtlsParameters : dtlsParameters \n                });\n                this.socket.once(\"recv-transport-connected\", ()=>{\n                    callBack();\n                })\n\n            }catch(err) {\n                errBack(err);\n            }\n\n        });\n\n        \n    }   \n    async setUpProducer() {\n        try {\n            this.videoProducer = await this.sendTransport.produce({\n                track: this.stream.getVideoTracks()[0]\n            });\n            this.audioProducer = await this.sendTransport.produce({\n                track: this.stream.getAudioTracks()[0]\n            })\n        } catch (error) {\n            console.log(`error in producing: ${error}`);\n        }\n    }\n\n    async setUpConsumer({id, producerId, kind, rtpParameters}, consumer) {\n        try {\n            const consumerType = await this.recvTransport.consume({\n                id,\n                producerId,\n                kind,\n                rtpParameters,\n            });\n            if(kind===\"audio\") {\n                consumer.audioConsumer = consumerType;\n            } else if(kind===\"video\") {\n                consumer.videoConsumer = consumerType;\n            }\n            \n        } catch (error) {\n            console.log(`error in consuming: ${error}`);\n        }\n    }\n\n}\nexport default Peer;","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/api/api.js",[],"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/RemoteVideo.jsx",["67","68","69","70"],"import {useRef, useEffect, useState, createRef} from \"react\";\nimport roomStyle from './roomStyle.module.css';\n\nexport default function RemoteVideo({consumer}) {\n\n    const element = createRef();\n    useEffect(()=>{\n        console.log(consumer.id);\n        if(consumer!==undefined) {\n            console.log(consumer.audioConsumer);\n            if(consumer.audioConsumer!=undefined && consumer.videoConsumer!=undefined) {\n                let mediaStream = new MediaStream([consumer.audioConsumer.track, consumer.videoConsumer.track]);\n                element.current.srcObject = mediaStream;\n            }\n        }\n\n    });\n    function playPause(type) {\n        consumer.playPauseVideo(type);\n    }\n    return(\n        <div>\n            <video autoPlay ref={element} className={roomStyle.remote_video}></video>\n            <button onClick={()=>{playPause(\"play\")}}>send test message</button>\n        </div>\n    );\n}","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/VideoBar.jsx",["71","72","73","74"],"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/UserVideo.jsx",["75","76","77","78","79"],"/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/Consumer.js",["80","81"],"\nclass Consumer {\n    constructor(userData, peer) {\n        this.id = userData.id;\n        this.userData = userData;\n        this.peer = peer;\n        this.audioConsumer = undefined;\n        this.videoConsumer = undefined;\n    }\n\n    playPauseAudio(type) {\n        if(this.audioConsumer!=undefined) {\n            this.peer.socket.emit(\"play-pause-audio\", {type:type, id:this.id});\n        } else {\n            console.log(\"can not pause or play audio bacause audioConsumer is undefined\");\n        }\n    }\n\n    playPauseVideo(type) {\n        if(this.videoConsumer!=undefined) {\n            this.peer.socket.emit(\"play-pause-video\", {type:type, id:this.id});\n        } else {\n            console.log(\"can not pause or play video bacause videoConsumer is undefined\");\n        }\n    }\n\n}\n\nexport default Consumer;","/home/pawan/WorkingDir/myWork/classroomProj/classroom2/src/compontents/Topbar.jsx",["82","83","84","85"],"import {useState, useEffect} from 'react';\nimport roomStyle from './roomStyle.module.css';\n\n\nexport default function Topbar({teacherData}) {\n    // console.log(teacherData)\n    // if(teacherData==undefined) {\n    //     return(\n    //         null\n    //     );\n    // }\n    return(\n        <div className={roomStyle.top_bar}>\n            <span>Time slot: 12PM-1PM</span>\n            <span>Class: {teacherData!=undefined?teacherData.class:null}</span>\n            <span>Live classroom: session by Mr. {teacherData!=undefined?teacherData.name:null}</span>\n            <span>subject: Mathamatics</span>\n        </div>\n    );\n}",{"ruleId":"86","replacedBy":"87"},{"ruleId":"88","replacedBy":"89"},{"ruleId":"90","severity":1,"message":"91","line":1,"column":19,"nodeType":"92","messageId":"93","endLine":1,"endColumn":28},{"ruleId":"90","severity":1,"message":"94","line":8,"column":10,"nodeType":"92","messageId":"93","endLine":8,"endColumn":16},{"ruleId":"95","severity":1,"message":"96","line":41,"column":46,"nodeType":"97","messageId":"98","endLine":41,"endColumn":48},{"ruleId":"95","severity":1,"message":"96","line":41,"column":83,"nodeType":"97","messageId":"98","endLine":41,"endColumn":85},{"ruleId":"95","severity":1,"message":"96","line":55,"column":46,"nodeType":"97","messageId":"98","endLine":55,"endColumn":48},{"ruleId":"95","severity":1,"message":"96","line":55,"column":83,"nodeType":"97","messageId":"98","endLine":55,"endColumn":85},{"ruleId":"95","severity":1,"message":"99","line":89,"column":32,"nodeType":"97","messageId":"98","endLine":89,"endColumn":34},{"ruleId":"95","severity":1,"message":"96","line":99,"column":17,"nodeType":"97","messageId":"98","endLine":99,"endColumn":19},{"ruleId":"100","severity":1,"message":"101","line":138,"column":32,"nodeType":"102","messageId":"98","endLine":138,"endColumn":45},{"ruleId":"90","severity":1,"message":"103","line":1,"column":9,"nodeType":"92","messageId":"93","endLine":1,"endColumn":15},{"ruleId":"90","severity":1,"message":"104","line":1,"column":28,"nodeType":"92","messageId":"93","endLine":1,"endColumn":36},{"ruleId":"95","severity":1,"message":"96","line":11,"column":38,"nodeType":"97","messageId":"98","endLine":11,"endColumn":40},{"ruleId":"95","severity":1,"message":"96","line":11,"column":75,"nodeType":"97","messageId":"98","endLine":11,"endColumn":77},{"ruleId":"90","severity":1,"message":"105","line":1,"column":10,"nodeType":"92","messageId":"93","endLine":1,"endColumn":16},{"ruleId":"90","severity":1,"message":"106","line":2,"column":10,"nodeType":"92","messageId":"93","endLine":2,"endColumn":22},{"ruleId":"90","severity":1,"message":"107","line":4,"column":8,"nodeType":"92","messageId":"93","endLine":4,"endColumn":16},{"ruleId":"108","severity":1,"message":"109","line":6,"column":1,"nodeType":"110","endLine":56,"endColumn":2},{"ruleId":"111","severity":1,"message":"112","line":24,"column":8,"nodeType":"113","endLine":24,"endColumn":43,"suggestions":"114"},{"ruleId":"95","severity":1,"message":"96","line":28,"column":16,"nodeType":"97","messageId":"98","endLine":28,"endColumn":18},{"ruleId":"95","severity":1,"message":"96","line":29,"column":34,"nodeType":"97","messageId":"98","endLine":29,"endColumn":36},{"ruleId":"95","severity":1,"message":"96","line":45,"column":16,"nodeType":"97","messageId":"98","endLine":45,"endColumn":18},{"ruleId":"95","severity":1,"message":"96","line":46,"column":34,"nodeType":"97","messageId":"98","endLine":46,"endColumn":36},{"ruleId":"95","severity":1,"message":"96","line":12,"column":30,"nodeType":"97","messageId":"98","endLine":12,"endColumn":32},{"ruleId":"95","severity":1,"message":"96","line":20,"column":30,"nodeType":"97","messageId":"98","endLine":20,"endColumn":32},{"ruleId":"90","severity":1,"message":"104","line":1,"column":9,"nodeType":"92","messageId":"93","endLine":1,"endColumn":17},{"ruleId":"90","severity":1,"message":"91","line":1,"column":19,"nodeType":"92","messageId":"93","endLine":1,"endColumn":28},{"ruleId":"95","severity":1,"message":"96","line":15,"column":38,"nodeType":"97","messageId":"98","endLine":15,"endColumn":40},{"ruleId":"95","severity":1,"message":"96","line":16,"column":62,"nodeType":"97","messageId":"98","endLine":16,"endColumn":64},"no-native-reassign",["115"],"no-negated-in-lhs",["116"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'Router' is defined but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","Expected '===' and instead saw '=='.","no-dupe-keys","Duplicate key 'rtpParameters'.","ObjectExpression","'useRef' is defined but never used.","'useState' is defined but never used.","'render' is defined but never used.","'DataConsumer' is defined but never used.","'Consumer' is defined but never used.","import/no-anonymous-default-export","Unexpected default export of anonymous class","ExportDefaultDeclaration","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'element' and 'isTeacher'. Either include them or remove the dependency array.","ArrayExpression",["117"],"no-global-assign","no-unsafe-negation",{"desc":"118","fix":"119"},"Update the dependencies array to be: [videoStream, micStatus, vidStatus, element, isTeacher]",{"range":"120","text":"121"},[842,877],"[videoStream, micStatus, vidStatus, element, isTeacher]"]